\section{Agenti}

Jak je uvedeno v popisu CCD kamery, pøi vyèítání dochází ke znaènému zatí¾ení
poèítaèe øídícího vyèítáni. Je tedy vhodné mít minimálnì dvì, navzájem spojená
zaøízení, z nich¾ jedno øídí vyèítání z kamery a druhé se stará o zpracování
snímkù.

Systém vychází z teorie agentù. Nad spoleèným komunikaèním rozhraním bì¾í malé
jednoúèelové procesy-agenti, které vykonávají svoji specifickou èinnost, a
komunikují s ostatnímy agenty.

Struktura agentù odpovídá zaøízením a procesùm pøítomných u dalekohledu.
Agenty budu mít pro:

\begin{itemize}

\item kamery

\item montá¾e

\item støechu spojenou s meterologickou stanicí

\item pozorování

\end{itemize}

Agenti pro pozorování budeme v dal¹ím textu oznaèovat jako {\bf klienty}. 
Je vhodné je rozdìlit na agenty pro:

\begin{itemize}

\item dlouhodobé pozorování

\item rychlé pozorování GRB

\item monitoring a zprávu systému

\end{itemize}

Jako {\bf zaøízení} budeme oznaèovat agenty ovládající zaøízení, tedy agenty 
pro kameru, montá¾ a støechu.

\section{Centralizované a distribuované uspoøádání}

Existují funkce systému, které je rozumné spravovat centrálnì. Jedná se v¾dy
o~funkce, které by se na v¹ech zaøízení mìli chovat stejnì. Jako vhodný
pøípad mù¾e poslou¾it autentifikace - pøi pou¾ití veøejného u¾ivatelského
jména a~tajného hesla je vhodné zajistit, aby klientu staèil jedno u¾ivatelské
jméno a jedno heslo. Dal¹ím pøíkladem mù¾e být seznam zaøízení obsa¾ených v
systému. Tyto funkce jsou dále oznaèovány jako {\bf centrální funkce}.

Funkce, které je potøeba volat na jednotlivých zaøízení, jsou oznaèovány jako
{\bf lokální funkce}.

Centrální funkce je mo¾né distribuovat na jednotlivé agenty. Je ale také mo¾né
pro jejich volání vytvoøit nového agenta - {\bf centrální server}. 

\subsection{Konfigurace bez centrálního serveru}

Ka¾dé proces udr¾uje spojení se v¹emi procesy, které potøebuje ke
svému bìhu - viz obrázek \ref{fig:client-server-direct}. 
Na první pohled velmi jednoduché a elegantní øe¹ení.

\dia{client-server-direct}{Klient bez centrálního serveru, s~pøímími spojeními na zaøízení}

\subsection{Konfigurace s~centrálním serverem}

Komunikace mezi procesy probíhá èásteènì pøes centrální server. Pøes nìj je
mo¾né vést v¹echnu komunikaci, nebo pouze komunikaci týkající se centrálních
funkcí.

\subsubsection{V¹e pøes centrální server}

V¹echna komunikace probíhá pøes centrální server. Centrální server urèí,
jakému procesu jsou data urèeny, a po¹le mu je. 

\dia{client-server-central}{Uspoøádání s~centrálnín serverem bez pøímého
spojení mezi procesy}

\subsubsection{Kombinace}

\dia{client-server-central-direct}{Uspoøádání s~centrálním serverem s~pøímím
spojením mezi procesy}

Komunikace urèená pro centrální server je posílána na centrální server,
komunikace mezi procesy je vedena pøímo.

\subsection{Závìr}

Pøi pøenosu dat z kamer na dal¹í zpracování je zbyteèné tyto data pøená¹et
jako odpovìdi pøes centrální server. Data se pohybují v øádu MB a jejich
pøenos na centrálním serveru by vy¾adoval zbyteènì mnoho systémových
prostøedkù.

Seznam procesù bì¾ících v systému je jednodu¾¹í udr¾ovat na centrálním
serveru.

Nejvýhodnìj¹í je tedy pou¾ít centrálního serveru s pøímým spojením mezi
procesy.

\subsection{Pøíklad}

Pro pøíklad je v diagramu \ref{fig:overview} popsána konfigurace Ondøejovského
systému. Plné èáry v nìm representují komunikaèní spojen.

\dia{overview}{Pøehled agentù - Ondøejovský dalekohled}

\begin{description}

\item[teld] agent ovládajícíc dalekohled

\item[WF1,WF2,NF] agent ovládající kamery

\item[grbc] agent pro pøíjem zpráv o GRB

\item[BACODINE, IBAN] systémy posílající pozice gama záblesku

\item[planc] dlouhodobá pozorování

\item[monitor] monitoring, ruèní ovládání

\item[focusc] ostøení kamery

\end{description}
